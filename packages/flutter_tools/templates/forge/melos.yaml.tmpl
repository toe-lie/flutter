name: {{projectName}}_flutter

packages:
  - packages/*
  - packages/*/*
  - packages/*/*/*
  - tests

ide:
  intellij: true

command:
  bootstrap:
    usePubspecOverrides: true
    hooks:
      post: |
        melos run gen:l10n
        melos run gen:build_runner
    environment:
      sdk: '>=3.4.3 <4.0.0'
    dependencies:
      bloc: ^8.1.2
      bloc_concurrency: ^0.2.2
      chucker_flutter: ^1.6.0
      collection: ^1.17.1
      connectivity_plus: ^5.0.2
      decimal: ^2.3.2
      dio: ^5.4.2+1
      drift: ^2.19.1+1
      drift_db_viewer: ^2.0.0
      dropdown_button2: ^2.3.9
      equatable: ^2.0.5
      firebase_core: ^3.2.0
      flutter:
        sdk: flutter
      flutter_bloc: ^8.1.3
      flutter_driver:
        sdk: flutter
      flutter_staggered_grid_view: ^0.7.0
      formz: ^0.6.1
      go_router: ^14.2.1
      google_fonts: ^5.1.0
      hive: ^2.2.3
      hive_flutter: ^1.1.0
      internet_connection_checker: ^1.0.0+1
      intl: ^0.19.0
      intl_phone_field: ^3.2.0
      jwt_decoder: ^2.0.1
      lottie: ^2.7.0
      path: ^1.8.3
      path_provider: ^2.0.15
      rxdart: ^0.27.7
      smooth_page_indicator: ^1.1.0
      uuid: ^3.0.7
      workmanager: ^0.5.2
    dev_dependencies:
      build_runner: ^2.4.8
      melos: ^6.1.0
      flutter_lints: ^4.0.0
      integration_test:
        sdk: flutter
      test: ^1.25.2
      mocktail: ^1.0.4
      bloc_test: ^9.1.3
      json_serializable: ^6.7.0

scripts:
  lint:all:
    run: melos run analyze && melos run format
    description: Run all static analysis checks.

  analyze:
    run: |
      melos exec -c 1 -- \
        flutter analyze --fatal-infos
    description: Run `flutter analyze` for all packages.

  format:
    run: melos exec dart format . --fix
    description: Run `dart format` for all packages.

  format-check:
    run: melos exec dart format . --set-exit-if-changed
    description: Run `dart format` checks for all packages.

  gen:build_runner:select:
    run: melos exec dart run build_runner build --delete-conflicting-outputs
    description: Run build_runner for all packages.
    packageFilters:
      dependsOn: [ build_runner ]

  gen:build_runner:
    run: melos run gen:build_runner:select --no-select
    description: Run build_runner for all packages.

  gen:l10n:select:
    run: melos exec flutter gen-l10n
    packageFilters:
      dirExists: lib/l10n
    description: Generate localization files for selected packages.

  gen:l10n:
    run: melos run gen:l10n:select --no-select
    description: Generate localization files for all packages.

  test:select:
    run: melos exec -c 1 -- flutter test
    packageFilters:
      dirExists: test
    description: Run `flutter test` for selected packages.

  test:
    run: melos run test:select --no-select
    description: Run all Flutter tests in this project.

  run:build_runner:
    description: Run build_runner in the project.
    run: dart run build_runner build --delete-conflicting-outputs